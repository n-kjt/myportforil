<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    <mapper namespace="com.example.demo.dao.LearningDataMapper">	

    <select id="getLearningData" resultType="com.example.demo.entity.LearningData">    
    SELECT ld.id, ld.name, ld.study_time, ld.category_id, ld.user_id,
       ld.created_at, ld.updated_at,
       c.name as category_name
       FROM learning_data ld
       LEFT JOIN categories c ON ld.category_id = c.id
       WHERE ld.user_id = #{userId}
       ORDER BY ld.category_id;
    </select> 
       
       <!--   学習時間の更新-->
       <update id="updateStudyTime" parameterType="com.example.demo.dto.StudyTimeUpdateRequest">
       UPDATE learning_data
       SET study_time = #{studyTime}, updated_at = CURRENT_TIMESTAMP
       WHERE user_id = #{userId} AND id = #{entryId}
       </update>
        

</mapper>
